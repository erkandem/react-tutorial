<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Dealing with state in React</title>

<!--
<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"> </script>
<script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
-->

<script src="js/react.development.js"></script>
<script src="js/react-dom.development.js"> </script>
<script src="js/babel.min.js"></script>

<style>
  #container {
    padding: 50px;
    background-color: #EEE;
  }
  #container h1 {
    font-size: 144px;
    font-family: sans-serif;
    color: #0080A8;
  }

</style>
</head>
  <body>
    <div id="container"></div>
      <script type="text/babel">
      class LightningCounter extends React.Component {
        constructor(props) {
          super(props);
          this.state = {strikes: 0};
          this.timerTick = this.timerTick.bind(
                  /*
                  until bind is called timerTick does not know
                  that the component is meant with `this`
                  instead of it's method scope `this`
                  */
                  this
          );
        }
        timerTick () {
          /*
            Will update the strikes property of the state object of the component
            to illustrate how many fictional lightnings alredy have striked since
            the user hit the page/app
           */
          this.setState({strikes: this.state.strikes + 100});
        }
        componentDidMount(){
          setInterval(this.timerTick, 1000);
        }
        render () {
          var counterStyle = {
            color: "#66FFFF",
            fontSize: 50
          };
          var count = this.state.strikes.toLocaleString();
          return (
                  <h1 style={counterStyle}>{count}</h1>
          );
        }
      }

      class LightningCounterDisplay extends React.Component {
          render() {
            var commonStyle = {
              margin: 0,
              padding: 0
            };

          var divStyle = {
            width: 250,
            textAlign: "center",
            backgroundColor: "black",
            padding: 40,
            fontFamily: "sans-serif",
            color: "#999",
            borderRadius: 10
          };
            var textStyles = {
              emphasis: {
                fontSize: 38,
                ...commonStyle  // equivalent to python **dict
              },
              smallEmphasis: {
                ...commonStyle
              },
              small: {
                fontSize: 17,
                opacity: 0.5,
                ...commonStyle
              }
            };
          return (
                  <div style={divStyle}>
                    <LightningCounter />
                    <h2 style={textStyles.smallEmphasis}>LIGHTNING STRIKES</h2>
                    <h2 style={textStyles.emphasis}>WORLDWIDE</h2>
                    <p style={textStyles.small}>(since you loaded this example)</p>
                  </div>
          );
        }
      }
      var destination = document.querySelector("#container");
      ReactDOM.render(
                <LightningCounterDisplay/>,
                destination
      );
    </script>
  </body>
</html>

